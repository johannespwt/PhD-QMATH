\documentclass[a4paper,11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[margin=1in]{geometry}
\usepackage{pdfpages}
\usepackage{mathrsfs}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{bbm}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{centernot}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{braket}
\usepackage{pgfplots}
\usepackage{lastpage}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage[english]{babel} 

\usepackage[square,sort,comma,numbers]{natbib}
\usepackage[colorlinks=true,linkcolor=blue]{hyperref}

\usepackage{fancyhdr}
\newcommand{\euler}[1]{\text{e}^{#1}}
\newcommand{\Real}{\text{Re}}
\newcommand{\Imag}{\text{Im}}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\Span}[1]{\text{span}\left(#1\right)}
\newcommand{\dom}[1]{\mathscr D\left(#1\right)}
\newcommand{\Ran}[1]{\text{Ran}\left(#1\right)}
\newcommand{\conv}[1]{\text{co}\left\{#1\right\}}
\newcommand{\Ext}[1]{\text{Ext}\left\{#1\right\}}
\newcommand{\vin}{\rotatebox[origin=c]{-90}{$\in$}}
\newcommand{\interior}[1]{%
	{\kern0pt#1}^{\mathrm{o}}%
}
\newcommand{\trace}[1]{\text{Tr}\left(#1\right)}
\newcommand*\diff{\mathop{}\!\mathrm{d}}
\newcommand{\ie}{\emph{i.e.} }
\newcommand{\eg}{\emph{e.g.} }
\newcommand{\dd}{\partial }
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\w}{\mathsf{w}}
\newcommand{\Area}{\text{Area}}

\newcommand{\Gliminf}{\Gamma\text{-}\liminf}
\newcommand{\Glimsup}{\Gamma\text{-}\limsup}
\newcommand{\Glim}{\Gamma\text{-}\lim}

\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}

\numberwithin{equation}{section}
\linespread{1.3}

\pagestyle{fancy}
\fancyhf{}
\rhead{Advanced Mathematical Physics, Assignment 3}
\lhead{Johannes Agerskov}
\rfoot{\thepage}
\lfoot{Dated: \today}
\author{Johannes Agerskov}
\date{Dated: \today}
\title{Advanced Mathematical Physics, Assignment 3}
\begin{document}

	\maketitle

\section{The Connes area formula}
Let $ \text{Area}(x_1,x_2,x_3) $ denote the oriented area of the triangle with vertices $ x_1,x_2,x_3\in\Z^2 $ which is positive if $ x_1,\ x_2, $ and $ x_3 $ are in counter clockwise order. Let, furthermore, $ (\Z^2)^*=\Z^2+(1/2,1/2) $ denote the dual lattice points.
\subsection*{(a)}
We prove first that the $ \Area(x_1,x_2,x_3) $ is equal to the number of dual lattice points inside the triangle $ x_1x_2x_3 $ plus half the number of dual lattice points on the boundary.
\begin{proof}
	To begin with, we notice that for any rectangle with sides parallel to the two axes of $ \Z^2 $ and vertices $ y_1,y_2,y_3,y_4\in \Z^2 $, it trivially holds that \begin{equation}
	\Area(y_1,y_2,y_3,y_4)=\#(\text{dual lattice point in the rectangle }y_1y_2y_3y_4),
	\end{equation}
	since there are no dual lattice points on the boundary and we can cover the rectangle with disjoint (up to sets of measure zero) unit squares around each dual lattice point inside the rectangle.\\
	Now notice that then theorem we want to show holds for any right triangle $ x_1x_2x_3 $, $ x_1,x_2,x_3\in\Z^2 $,  with the legs parallel to the two axes of $ \Z^2 $. To see this we construct from any right triangle with legs parallel to the two axes, a rectangle with sides parallel to the two axes. This is done by rotating the triangle by $ \pi $ and gluing (by translation) the hypotenuses together. We then notice that the area of the resulting rectangle is exactly twice the area of the right triangle. Thus the area of the right triangle is equal to half the number of dual lattice points in the rectangle. Since the two triangle have an equal number of dual lattice points inside, and the they share the dual lattice points on their boundary (hypotenuses), we conclude that the area of a single triangle is the number of dual lattice points inside the triangle plus half the number of dual lattice points on the boundary.\\
	We finally notice that the desired result now follows from observing that any triangle in the lattice can be made into a rectangle with sides parallel to the axes, by adding right triangles with legs parallel to the axes. Simply add right triangles with hypotenuses given by the sides of the original triangle (such that they are disjoint from the original triangle). Thus the area of the original triangle is the area of the resulting rectangle minus the area of the right triangles we added. However, then each dual lattice point inside the original triangle contributes one to the area. Each dual lattice point on the boundary of the triangle is added once by the rectangle, and half is then subtracted by the right triangles, thus they contribute one half each. Finally all dual lattice point outside the triangle but inside the rectangle is added once by the rectangle, and substracted once by the right triangle and thus contribute nothing to the area. In total we have that the area is the number of dual lattice point inside the triangle plus one half times the number of dual lattice points on the boundary. 
\end{proof}
%\begin{proof}
%	Let $ y_1,y_2\in \Z^2 $, we then notice that line $ y_1y_2 $ (line going from $ y_1 $ to $ y_2 $) might cut through some cells (unit squares of the lattice). Say we are interested in computing the area of cells the line go trough, then we simply sum up the number of dual lattice point that are a distance of less than $ 1 $ (in the Manhattan metric) from the line. Now say that we instead are interested in the area of these cells but restricted to one side of line. In this case, we notice that $ \Z^2 $ is symmetric under $ \pi $-rotations. Thus we see that whatever set of "cut" cells that are on one side of the line, it can be rotated (up to a lattice translation) into the set of "cut" cells on the other side. And the combination of these two disjoint sets from the set of all cells the line go through. By rotation and translation invariance of the area, we conclude that the area of the cut cells on either side is exactly half the number of dual lattice points that are a distance of less than $ 1 $ to the line. Now we notice that all dual lattice point in the set $ \{x^*\in(\Z^2)^*\ \vert\ \text{dist}(x^*,y_1y_2)<1\} $ are either on one side of line, on the other side of the line, or directly on the line. Again by invariance under a $ \pi $-rotation (and translation) we conclude that the number of dual lattice points on one side equals the number of dual lattice points on the other side. And thus we may conclude that the area of the cut cell on one side of the line is equal to the number of dual lattice point on that side with distance less than $ 1 $ to the line, plus half the number of dual lattice point on the line. From this result it clearly follows that we can compute the area between a line and say the first axis by adding the number of dual lattice points between the line and first axis, and half the number of dual lattice points on the line.\\
%	We are now ready to compute the area of a triangle with the above knowledge. Given a triangle $ x_1x_2x_3 $, $ x_1,x_2,x_3\in\Z^2 $ we compute the area by first translating the triangle such that it lies in the upper half-plane.  Now the area of the triangle can be computed by drawing vertical lines from each vertex to the first axis and computing the area of the resulting trapezoids. The area of the triangle is then the area under the the top line(s) of the triangle minus the area under the bottom line(s) of the triangle. By this construction we see from the above result that we get that each dual lattice point in the triangle contributes exactly one to the area, each dual lattice point below the triangle (between the triangle and the first axis) is added and subtracted once, each dual lattice point on the top boundary of the triangle contributes exactly one half, and each dual lattice point on the bottom boundary of the triangle is added and half of it is subtracted. In total we have that the area is the sum of dual lattice point in the triangle plus one half times the dual lattice points on the boundary, and the desires result follows.
%\end{proof}
	\subsection*{(b)}
	For any dual lattice point $ a\in(\Z^2)^* $, let $ \theta_i(a)\in(-\pi,\pi) $ be the angle at $ a $ in the triangle $ x_iax_{i+1} $ where $ x_4\equiv x_1 $, unless $ a $ lies on the line between $ x_i $ and $ x_{i+1} $, in which case $ \theta_i(a)=0 $.\\
	We then prove that $ \sum_{a\in(\Z^2)^*}\left(\theta_1(a)+\theta_2(a)+\theta_3(a)\right)=2\pi\Area(x_1,x_2,x_3) $. \begin{proof}
		Assume $ x_1x_2x_3 $ in counter clockwise order.
		The the statement is actually quite obvious from the fact that by the definition of $ \theta_i $ we have $ (\theta_1(a)+\theta_2(a)+\theta_3(a))=2\pi $ for $ a $ inside the triangle and  $ (\theta_1(a)+\theta_2(a)+\theta_3(a))=\pi $ for $ a $ on the boundary of the triangle. On the other hand $ (\theta_1(a)+\theta_2(a)+\theta_3(a))=0 $ for $ a $ outside of the triangle. Reversing the order of $ x_1x_2x_3 $ gives us a minus by the definition of $ \theta_i(a) $. Thus \begin{equation}
		\begin{aligned}
		\sum_{a\in(\Z^2)^*}\left(\theta_1(a)+\theta_2(a)+\theta_3(a)\right)&=2\pi\text{sgn}(x_1,x_2,x_3)\left(\#(\text{dlp inside})+\frac{1}{2}\#(\text{dlp on boundary})\right)\\&=2\pi\Area(x_1,x_2,x_3),
		\end{aligned}
		\end{equation}
		where \begin{equation}
		\text{sgn}(a,b,c)=\begin{cases}
		1& \text{ for }a,b,c\text{ in counter clockwise order,}\\
		-1& \text{ for }a,b,c\text{ in clockwise order,}
		\end{cases}
		\end{equation} and dlp stands for "dual lattice points".
	\end{proof} 
	\subsection*{(c)}
	Let $ f:(-\pi,\pi)\to\R $ be antisymmetric and bounded such that $ f(\theta)=\mathcal{O}(\abs{\theta}^3) $. We then prove that \begin{equation}
	\sum_{a\in(\Z^2)^*}f(\theta_i(a)),\label{sumf}
	\end{equation}
	is absolutely summable for $ i=1,2,3 $. \begin{proof}
		Notice that for any triangle $ bac $ with $ b,a,c\in\R^2 $ we have the cosine relation\begin{equation}
		\abs{bc}^2=\abs{ab}^2+\abs{ac}^2-2\cos(\theta)\abs{ab}\abs{ac}
		\end{equation}
	where $ \theta $ is the angle at $ a $ in the triangle $ bac $. \\
	Consider now $ \theta_i(a) $. We know by the cosine relation above that $ \cos(\theta_i(a))=\frac{\abs{ax_i}^2+\abs{ax_{i+1}}^2-\abs{x_ix_{i+1}}^2}{2\abs{ax_i}\abs{ax_{i+1}}} $. Since $ \arccos(1-\abs{x})=\mathcal{O}(\sqrt{\abs{x}}) $, we conclude that $ (f\circ\arccos)(1-x)=\mathcal{O}(\abs{x}^{3/2}) $. By the triangle inequality we know that $ \abs{\abs{ax_i}-\abs{x_ix_{i+1}}}\leq\abs{ax_{i+1}}\leq\abs{ax_i}+\abs{x_ix_{i+1}} $. Let $ M $ denote the set \begin{equation}
	M=\{a\in\Z^2\ \vert\ \abs{ax_i}>\abs{x_ix_{i+1}}\},
	\end{equation} then the sum in \eqref{sumf} can be split in a sum over $ M $ and a sum over $ M^\complement $. Clearly the sum over $ M^\complement $ is finite by boundedness of $ f $, and we need not worry about any divergences from that contribution. Let $ a\in M $, then we may conclude that \begin{equation}
	1\geq\cos(\theta_i(a))\geq\frac{\abs{ax_i}}{2\abs{ax_{i+1}}}+\frac{\abs{ax_{i+1}}}{2\abs{ax_i}}-\frac{\abs{x_ix_{i+1}}^2}{2\abs{ax_i}(\abs{ax_i}-\abs{x_ix_{i+1}})}.
	\end{equation}
	Using that $ 1\leq\frac{1}{2}\left(k+k^{-1}\right) $, for any $k>0$,
	 we find \begin{equation}
	1\geq\cos(\theta_i(a))\geq1-C\frac{1}{\abs{ax_i}^2},
	\end{equation}
	for some $ C>0 $. Therefore we may conclude\begin{equation}
	f(\theta_i(a))=(f\circ\arccos)(\cos(\theta_i(a)))=\mathcal{O}\left(\left(\frac{1}{\abs{ax_i}}\right)^3\right)
	\end{equation}
	therefore we also have \begin{equation}
	\abs{f(\theta_i(a))}=\mathcal{O}\left(\frac{1}{\abs{ax_i}^3}\right).
	\end{equation}
	It this then a well known fact that $ \sum_{a\in\Z^2\setminus\{0\}}\frac{1}{\abs{a}^3}<\infty $, which, by translation of the summand, proves the claim.
\end{proof}
\subsection*{(d)}
Let $ \tau_i $ be the reflection of $ (\Z^2)^* $ in the midpoint $ (x_i+x_{i+1})/2 $, \ie it takes the point $ a\in(\Z^2)^* $ and maps to the point $ a+2((x_i+x_{i+1})/2-a)=x_i+x_{i+1}-a $. Clearly since $ x_i\in \Z^2 $ and $ x_{i+1}\in\Z^2 $ we have $ x_i+x_{i+1}\in\Z^2 $, and since $ a\in\Z^2+(1/2,1/2) $ we have $ x_i+x_{i+1}-a \in\Z^2+(1/2,1/2)=(\Z^2)^* $ Thus we conclude that $ \tau_i:(\Z^2)^*\to(\Z^2)^* $. Now the triangle $ x_iax_{i+1} $ is related to $ x_i\tau_i(a)x_{i+1} $ by a $ \pi $ rotation and the interchange $ x_i\leftrightarrow x_{i+1} $. This can be seen by the fact that under a $ \pi $ rotation around the point $ (x_i+x_{i+1})/2 $, the point $ a $ maps exactly to $ \tau_i(a) $. On the other hand $ x_i $ maps to $ x_{i+1} $ and vice versa, thus the $ \pi $ rotation around the midpoint, maps $ x_iax_{i+1} $ to $ x_{i+1}\tau_i(a)x_i=\tau_i(x_i)\tau_i(a)\tau_i(x_{i+1}) $. Now interchanging $ x_i $ and $ x_{i+1} $ we exactly see that we get $ x_i\tau_i(a)x_{i+1} $. Thus we conclude that $ \theta_i(\tau_i(a))=-\theta_i(a) $, since the magnitude of the angle is preserved but the counter clockwise order of the vertices have changed. Furthermore, we then conclude that \begin{equation}
f(\theta_i(\tau_i(a)))=-f(\theta_i(a)),
\end{equation}
by antisymmetry of $ f $.\\
Notice that $ (\Z^2)^*$ can be split in two. Through the point $ (x_i+x_{i+1})/2 $ we draw a vertical line, all dual lattice points to left of that line \emph{or} on the line above the point $ (x_i+x_{i+1})/2 $, we denote by $ \Z^2_L $ and all points to the right of that line \emph{or} on the line below the point $ (x_i+x_{i+1})/2 $ we denote by $ \Z^2_R $. Notice that $ \tau_i(\Z^2_L)=\Z^2_R $, \ie the image of $ \tau_i $ on $ \Z^2_L $ is equal to $ \Z^2_R $, and $ (\Z^2)^*=\Z^2_L\cup\Z^2_R\cup Z $, where \begin{equation}
Z=\begin{cases}
\{ (x_i+x_{i+1})/2 \}&\text{if } (x_i+x_{i+1})/2\in(\Z^2)^*\\
\emptyset&\text{if }  (x_i+x_{i+1})/2\notin(\Z^2)^*
\end{cases}
\end{equation}
Thus we may split the sum\begin{equation}
\sum_{a\in(\Z^2)^*}f(\theta_i(a))=\sum_{a\in\Z^2_L}\left[f(\theta_i(a))+f(\theta_i(\tau_i(a)))\right]+\sum_{a\in Z}f(\theta_i(a)),
\end{equation}
where we used the fact that $ \sum_{a\in(\Z^2)^*}f(\theta_i(a)) $ is absolutely summable, to switch around the order of the terms.
Clearly, the last term is zero if $ Z=\emptyset $, on the other hand if $ Z=\{(x_i+x_{i+1})/2\} $, the last term is also zero, since $ \theta_i((x_i+x_{i+1})/2)=0 $ so $ f(\theta_i((x_i+x_{i+1})/2))=0 $ by antisymmetry. The first term is also zero by the fact that $ f(\theta_i(\tau_i(a)))=-f(\theta_i(a)) $, so all terms in the series vanish. Thus we conclude that $ \sum_{a\in(\Z^2)^*}f(\theta_i(a))=0 $.
\subsection*{(e)}
Now let $ g:(-\pi,\pi)\to\R $ be bounded and antisymmetric such that\begin{equation}
g(\theta)=\theta+\mathcal{O}(\abs{\theta}^3),
\end{equation}
We then prove the Connes area formula\begin{equation}
\sum_{a\in(\Z^2)^*}\left(g(\theta_1(a))+g(\theta_2(a))+g(\theta_3(a))\right)=2\pi\Area(x_1,x_2,x_3).
\end{equation}

\begin{proof}
The Connes area formula follows from the calculation \begin{equation}
\begin{aligned}
\sum_{a\in(\Z^2)^*}\left(g(\theta_1(a))+g(\theta_2(a))+g(\theta_3(a))\right)=&\sum_{a\in(\Z^2)^*}\left(\theta_1(a)+\theta_2(a)+\theta_3(a)\right)\\&+\sum_{a\in(\Z^2)^*}\left(h(\theta_1(a))+h(\theta_2(a))+h(\theta_3(a))\right),
\end{aligned}
\end{equation}
where $ h(\theta)=g(\theta)-\theta=\mathcal{O}(\abs{\theta}^3) $. Here we used the fact that the two series on the right hand side are both convergent. The last sum satisfies the assumptions on $ f $ in problem 1.(d) so we may conclude that $ \sum_{a\in(\Z^2)^*}\left(h(\theta_1(a))+h(\theta_2(a))+h(\theta_3(a))\right)=0 $. By problem 1.(b) we thus have \begin{equation}
\begin{aligned}
\sum_{a\in(\Z^2)^*}\left(g(\theta_1(a))+g(\theta_2(a))+g(\theta_3(a))\right)=&\sum_{a\in(\Z^2)^*}\left(\theta_1(a)+\theta_2(a)+\theta_3(a)\right)=2\pi\Area(x_1,x_2,x_3),
\end{aligned}
\end{equation}
as desired.
\end{proof}
\section{Flux piercing index generalizes Chern number}
Let $ a\in\R^2\setminus\Z^2 $. We define the unitary multiplication operator\begin{equation}
U_a\ket{x,\sigma}=\euler{i\theta_a(x)}\ket{x,\sigma},
\end{equation}
where $ \theta_a(x):\R^2\to[0,2\pi) $, is the angle the vector $ x-a $ makes with the first axis. The flux piercing index is defined by the index of a pair of projections in the following way\begin{equation}
\text{Ch}_{II}(P)=\text{index}(U_a^\dagger PU_a,P)\in\Z.
\end{equation}
It was shown in the lecture notes that $ (U_a^\dagger PU_a-P)^3 $ is trace class and that we then have \begin{equation}
\text{Ch}_{II}(P)=\trace{(U_a^\dagger PU_a-P)^3}.
\end{equation}
\subsection*{(a)}
We show that \begin{equation}
\text{Ch}_{II}(P)=\sum_{x,y,z\in\Z^2}\trace{P_{xy}P_{yz}P_{xz}}\left(\sin\angle(y,a,x)+\sin\angle(z,a,y)+\sin\angle(x,a,z)\right)
\end{equation}
\begin{proof}
	Notice that \begin{equation}
	\begin{aligned}
	\trace{(U_a^\dagger PU_a-P)^3}&=\sum_{x,y,z}\left(\braket{x|(U_a^\dagger PU_a-P)|y}\braket{y|(U_a^\dagger PU_a-P)|z}\braket{z|(U_a^\dagger PU_a-P)|x}\right)\\
	&=\sum_{x,y,z}\left(\trace{P_{xy}P_{yz}P_{zx}}(\euler{i(\theta_a(y)-\theta_a(x))}-1)(\euler{i(\theta_a(z)-\theta_a(y))}-1)(\euler{i(\theta_a(x)-\theta_a(z))}-1)\right)\\
	&=\sum_{x,y,z}\left(\trace{P_{xy}P_{yz}P_{zx}}(\euler{i(\theta_a(y)-\theta_a(x))}-1)(\euler{i(\theta_a(z)-\theta_a(y))}-1)(\euler{i(\theta_a(x)-\theta_a(z))}-1)\right)
	\end{aligned}
	\end{equation}
	Using that
	\begin{equation}
	\begin{aligned}
	&(\euler{i(\theta_a(y)-\theta_a(x))}-1)(\euler{i(\theta_a(z)-\theta_a(y))}-1)(\euler{i(\theta_a(x)-\theta_a(z))}-1)\\&\quad=\euler{i(\theta_a(y)-\theta_a(x))}-\euler{-i(\theta_a(y)-\theta_a(x))}+\euler{i(\theta_a(z)-\theta_a(y))}-\euler{-i(\theta_a(z)-\theta_a(y))}+\euler{i(\theta_a(x)-\theta_a(z))}-\euler{-i(\theta_a(x)-\theta_a(z))}\\&\quad= 2i\left(\sin(\theta_a(y)-\theta_a(x))+\sin(\theta_a(z)-\theta_a(y))+\sin(\theta_a(x)-\theta_a(z))\right),
	\end{aligned}
	\end{equation}
	and the fact that we define the angle $ \angle(b,a,c) $ to be positive of if $ b,a,c $ is in clockwise order in $ \Z^2 $ (see figure 1 in the assignment) such that \eg $ \theta_a(y)-\theta_a(x)=-\angle(y,a,x) $, we find \begin{equation}
		\begin{aligned}
		\trace{(U_a^\dagger PU_a-P)^3}&=-2i\sum_{x,y,z}\trace{P_{xy}P_{yz}P_{zx}}\left(\sin\angle(y,a,x)+\sin\angle(z,a,y)+\sin\angle(x,a,z)\right),
		\end{aligned}
	\end{equation}
	which is the desired result.
\end{proof}
\subsection*{(b)}
Assume translation invariance of $ P $, then we may rewrite\begin{equation}
\trace{P_{xy}P_{yz}P_{zx}}=\trace{P_{0(y-x)}P_{(y-x)(z-x)}P_{(z-x)0}}.
\end{equation}
Furthermore, since translations preserve angles we may also rewrite \begin{equation}
\angle(y,a,x)=\angle(y-x,a-x,0),\ \angle(z,a,y)=\angle(z-x,a-x,y-x),\ \angle(x,a,z)=\angle(0,a-x,z-x).
\end{equation}
Thus we have by 2.(a) \begin{equation}
\begin{aligned}
\text{Ch}_{II}(P)=&-2i\sum_{x,y,z}\trace{P_{0(y-x)}P_{(y-x)(z-x)}P_{(z-x)0}}\\&\quad\times\left(\sin\angle(y-x,a-x,0)+\sin\angle(z-x,a-x,y-x)+\sin\angle(0,a-x,z-x)\right)\\
=&-2i\sum_{\substack{y,z\in\Z^2\\ a\in(\Z^2)^*}}\trace{P_{0y}P_{yz}P_{z0}}\left(\sin\angle(y,a,0)+\sin\angle(z,a,y)+\sin\angle(0,a,z)\right),
\end{aligned}
\end{equation}
where we in the last step simply renamed the dummy variables and used the fact that the domain of summation is translation invariant.
\subsection*{(c)}
We now apply the Connes area formula, which were proved in problem 1, to the result of 2.(b). We let $ g(\theta)=\sin(\theta) $. Notice that then $ g $ is antisymmetric since $ \sin(\theta) $ is odd. Furthermore, by Taylor's theorem we have \begin{equation}
\sin(\theta)=\sin(0)+(\sin(\theta))'\rvert_{\theta=0}\theta+\frac{1}{2}(\sin(\theta))''\rvert_{\theta=0}\theta^2+\frac{1}{6}(\sin(\theta))'''\rvert_{\theta=0}\theta^3+o(\abs{\theta}^3)
\end{equation} 
by straightforward calculation we find\begin{equation}
\sin(\theta)=\theta+\frac{1}{6}\theta^3+o(\abs{\theta}^3).
\end{equation} 
Since we clearly have $ \frac{1}{6}\theta^3+o(\abs{\theta}^3)=\mathcal{O}(\abs{\theta}^3) $ we conclude that $ g $ satisfies the hypotheses for Connes area formula to apply. Thus we have \begin{equation}
\sum_{a\in(\Z^2)^*}\left(\sin\angle(y,a,0)+\sin\angle(z,a,y)+\sin\angle(0,a,z)\right)=2\pi \Area(y,0,z)=2\pi \frac{1}{2}y\wedge z
\end{equation} 
where the first step is Connes area formula, and the last step we introduced the oriented area of the parallelogram spanned by $ y $ and $ z $ ($ y\wedge z=y_2z_1-y_1z_2 $). Thus we find by 2.(b)\begin{equation}
\text{Ch}_{II}(P)=-2\pi i\sum_{y,z\in\Z^2}\trace{P_{0y}P_{yz}P_{z0}}y\wedge z.
\end{equation}
\subsection*{(d)}
Notice that by the result in 2.(c) we have \begin{equation}
\begin{aligned}
\text{Ch}_{II}(P)&=-2\pi i\sum_{y,z\in\Z^2}\trace{P_{0y}P_{yz}P_{z0}}y\wedge z\\&=-2\pi i\sum_{y,z\in\Z^2}\trace{P_{0y}P_{yz}P_{z0}}(y_2z_1-y_1z_2)\\
&=-2\pi i\sum_{y,z\in\Z^2}\braket{0|P|y}\braket{y|P|z}\braket{z|P|0}(y_2z_1-y_1z_2)\\
&=-2\pi i\sum_{y,z\in\Z^2}\braket{0|P|y}(\braket{y|X_2PX_1|z}-\braket{y|X_1PX_2|z})\braket{z|P|0}\\
&=-2\pi i\trace{P_0P(X_2PX_1-X_1PX_2)P}\\
&=-2\pi i\trace{P_0P(X_2PX_1P-X_1PX_2P)}\\
&=-2\pi i\text{Tr}\left(P_0P(X_2PX_1P-X_1PX_2P+X_1PPX_2-PX_2X_1P-X_2PX_1\right.\\&\qquad\qquad\qquad+\left.PX_1X_2P-PX_1PX_2+PX_2PX_1)\right)
\end{aligned}
\end{equation}
where we in the last equality used that $ \trace{P_0...X_i}=0 $, $ i=1,2 $ and we added and subtracted the term $ PX_1X_2P $. Collecting the terms we find that \begin{equation}
\begin{aligned}
\left(X_2PX_1P-X_1PX_2P+X_1PPX_2-PX_2X_1P-X_2PX_1+PX_1X_2P-PX_1PX_2+PX_2PX_1\right)\\=-\left[[P,X_1],[P,X_2]\right],
\end{aligned}
\end{equation}
from which we conclude that \begin{equation}
\text{Ch}_{II}(P)=2\pi i \trace{P_0P\left[[P,X_1],[P,X_2]\right]}.
\end{equation}
Comparing to  eq. (99) in the lecture notes we conclude that $ \text{Ch}_{II}(P)=\text{Ch}(P) $ whenever $ P $ is translational invariant, and $ \text{Ch}_{II} $ extends the Chern number.
\end{document}